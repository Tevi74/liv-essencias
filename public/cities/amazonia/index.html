<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Liv Essências — Amazônia</title>

  <!-- (opcional) base global -->
  <!-- <link rel="stylesheet" href="/assets/global/styles.css"> -->

  <!-- CSS local da Amazônia -->
  <link rel="stylesheet" href="/cities/amazonia/style.css?v=4">

  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
</head>
<body>
  <header class="hero">
    <img src="/cities/amazonia/imagens/logo-liv.png" alt="Logo Liv Essências" class="hero-logo" />
    <h1>Liv Amazônia</h1>
    <p>Entre floresta, aromas de plantas e frutas, a Amazônia pulsa em cores e sentidos.</p>
    <div class="hero-actions">
      <button id="btnAudio" class="btn btn-primary">Tocar Som</button>
      <button id="btnAudioStop" class="btn">Stop</button>
    </div>
  </header>

  <!-- CENA 360º -->
  <section class="scene-wrap">
    <a-scene embedded>
      <a-sky id="sky360" src="/cities/amazonia/imagens/amazonia-poster.png" rotation="0 -90 0"></a-sky>
      <a-entity camera look-controls></a-entity>
    </a-scene>
  </section>

  <main class="container">
    <section class="section">
      <h2>Amazônia</h2>
      <p>Encontro das águas, floresta viva, tradição, espiritualidade e biodiversidade única.</p>

      <div class="actions">
        <button id="scene-encontro-das-aguas" class="btn">Encontro das Águas</button>
        <button id="scene-arquipelago-de-anavilhana" class="btn">Arquipélago de Anavilhanas</button>
        <button id="scene-praia-da-ponta-negra" class="btn">Praia da Ponta Negra</button>
        <button id="scene-teatro-amazonia" class="btn">Teatro Amazonas</button>
        <button id="scene-poster" class="btn btn-ghost">Pôster</button>
      </div>
    </section>

    <!-- Aromas -->
    <section class="section" id="aromas">
      <h2>Aromas de Amazônia</h2>
      <p class="muted"><em>“Copaíba, guaraná, cupuaçu — óleos e essências da floresta.”</em></p>

      <div id="aromaPreview" class="aroma-preview" hidden>
        <img id="aromaImg" src="" alt="Aroma visual">
      </div>

      <div class="aromas-grid">
        <div class="aroma-card" style="--tone:#ff9933">
          <div class="aroma-head">
            <h3>Copaíba</h3><span class="pill">Intensidade</span>
          </div>
          <p class="aroma-notes">Resina balsâmica, notas amadeiradas</p>
          <div class="aroma-actions">
            <button class="btn btn-primary inspire-btn"
              data-audio="/cities/amazonia/audios/copaiba-amazonia.mp3"
              data-img="/cities/amazonia/imagens/copaiba-amazonia.png">Inspire</button>
          </div>
        </div>

        <div class="aroma-card" style="--tone:#cc3366">
          <div class="aroma-head">
            <h3>Guaraná</h3><span class="pill">Vigor</span>
          </div>
          <p class="aroma-notes">Sementes torradas, energia da mata</p>
          <div class="aroma-actions">
            <button class="btn btn-primary inspire-btn"
              data-audio="/cities/amazonia/audios/guarana.mp3"
              data-img="/cities/amazonia/imagens/guarana-amazonia.png">Inspire</button>
          </div>
        </div>

        <div class="aroma-card" style="--tone:#996633">
          <div class="aroma-head">
            <h3>Cupuaçu</h3><span class="pill">Conforto</span>
          </div>
          <p class="aroma-notes">Cremoso, cacau amazônico, fruta doce</p>
          <div class="aroma-actions">
            <button class="btn btn-primary inspire-btn"
              data-audio="/cities/amazonia/audios/cupuacu.mp3"
              data-img="/cities/amazonia/imagens/cupuacu-amazonia.png">Inspire</button>
          </div>
        </div>
      </div>
    </section>

    <!-- Galeria -->
    <section class="section">
      <h2>Galeria Amazônia</h2>
      <div class="media-grid">
        <figure><img src="/cities/amazonia/imagens/encontro-das-aguas.png" alt="Encontro das Águas"><figcaption>Encontro das Águas</figcaption></figure>
        <figure><img src="/cities/amazonia/imagens/arquipelago-de-anavilhana.png" alt="Arquipélago de Anavilhanas"><figcaption>Arquipélago de Anavilhanas</figcaption></figure>
        <figure><img src="/cities/amazonia/imagens/praia-da-ponta-negra.png" alt="Praia da Ponta Negra"><figcaption>Praia da Ponta Negra</figcaption></figure>
        <!-- Se você NÃO renomear o arquivo e ele continuar com espaço:
             use esta linha em vez da de cima:
             <img src="/cities/amazonia/imagens/praia-%20da-ponta-negra.png" ...> -->
        <figure><img src="/cities/amazonia/imagens/teatro-amazonia.png" alt="Teatro Amazonas"><figcaption>Teatro Amazonas</figcaption></figure>
      </div>

      <div class="narration-card">
        <h3>Narração — Amazônia</h3>
        <p class="muted">Uma introdução breve à Amazônia.</p>
        <div class="narration-actions">
          <button class="btn btn-primary" id="narPlay">Play</button>
          <button class="btn" id="narPause">Pause</button>
          <button class="btn" id="narStop">Stop</button>
        </div>
        <audio id="narAudio" preload="auto">
          <source src="/cities/amazonia/audios/amazonia.mp3?v=2" type="audio/mpeg" />
        </audio>
      </div>
    </section>

    <!-- Vídeos -->
    <section class="section">
      <h2>Vídeos — Amazônia</h2>
      <div class="media-grid">
        <div class="video-embed">
          <iframe src="https://www.youtube.com/embed/OxOb5zTC6MA"
            title="Vídeo 1 — Amazônia"
            frameborder="0"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
            allowfullscreen loading="lazy"></iframe>
        </div>
        <div class="video-embed">
          <iframe src="https://www.youtube.com/embed/DNwvIQEXHP4"
            title="Vídeo 2 — Amazônia"
            frameborder="0"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
            allowfullscreen loading="lazy"></iframe>
        </div>
        <div class="video-embed">
          <iframe src="https://www.youtube.com/embed/OByhSFzgGnA"
            title="Vídeo 3 — Amazônia"
            frameborder="0"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
            allowfullscreen loading="lazy"></iframe>
        </div>
      </div>
    </section>
  </main>

  <!-- Áudios -->
  <audio id="bgAudio" loop preload="auto">
    <source src="/cities/amazonia/audios/musica.mp3" type="audio/mpeg">
  </audio>
  <audio id="aromaAudio" preload="auto"></audio>

  <footer class="footer"><small>© Liv Essências — Amazônia</small></footer>

  <script>
    // Música geral
    const btn = document.getElementById("btnAudio");
    const btnStop = document.getElementById("btnAudioStop");
    const bgAudio = document.getElementById("bgAudio");
    if (btn && btnStop && bgAudio) {
      let isPlaying = false;
      const upd = ()=> btn.textContent = isPlaying ? "Pausar Som" : "Tocar Som";
      btn.onclick = async () => { if (!isPlaying){ await bgAudio.play(); isPlaying = true; } else { bgAudio.pause(); isPlaying=false; } upd(); };
      btnStop.onclick = () => { bgAudio.pause(); bgAudio.currentTime=0; isPlaying=false; } ;
      upd();
    }

    // 360 — cenas
    const sky = document.getElementById("sky360");
    const setSky = (src) => sky.setAttribute("src", src);
    document.getElementById("scene-encontro-das-aguas").onclick =
      () => setSky("/cities/amazonia/imagens/encontro-das-aguas.png");
    document.getElementById("scene-arquipelago-de-anavilhana").onclick =
      () => setSky("/cities/amazonia/imagens/arquipelago-de-anavilhana.png");
    document.getElementById("scene-praia-da-ponta-negra").onclick =
      () => setSky("/cities/amazonia/imagens/praia-da-ponta-negra.png");
    document.getElementById("scene-teatro-amazonia").onclick =
      () => setSky("/cities/amazonia/imagens/teatro-amazonia.png");
    document.getElementById("scene-poster").onclick =
      () => setSky("/cities/amazonia/imagens/amazonia-poster.png");

    // Aromas
    const aromaAudio = document.getElementById('aromaAudio');
    const previewBox = document.getElementById('aromaPreview');
    const previewImg = document.getElementById('aromaImg');
    document.querySelectorAll('.inspire-btn').forEach(btn=>{
      btn.addEventListener('click', async ()=>{
        if (!bgAudio.paused){ bgAudio.pause(); bgAudio.currentTime=0; }
        aromaAudio.src = btn.dataset.audio;
        try { await aromaAudio.play(); } catch {}
        previewImg.src = btn.dataset.img;
        previewBox.hidden = false;
        previewBox.scrollIntoView({ behavior:'smooth', block:'center' });
      });
    });

    // Narração
    const nar = document.getElementById('narAudio');
    const narPlay  = document.getElementById('narPlay');
    const narPause = document.getElementById('narPause');
    const narStop  = document.getElementById('narStop');
    if (nar && narPlay && narPause && narStop) {
      narPlay.onclick = async () => {
        try { if (!bgAudio.paused){ bgAudio.pause(); bgAudio.currentTime=0; } } catch {}
        try { if (!aromaAudio.paused){ aromaAudio.pause(); aromaAudio.currentTime=0; } } catch {}
        try { await nar.play(); } catch {}
      };
      narPause.onclick = () => nar.pause();
      narStop.onclick  = () => { nar.pause(); nar.currentTime = 0; };
    }
  </script>
</body>
</html>
